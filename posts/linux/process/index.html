<!DOCTYPE html>
<html><head><title>프로세스에 대해 알아보자</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="../../../main.css" type="text/css"></head><body><header><a id="title" href="../../.."><h1>scarf@127.0.0.1</h1></a><nav><ul><li><a href="../../../about">About</a></li><li><a href="../..">Posts</a></li><li><a href="../../../tags">Tags</a></li></ul></nav><hr></header><section><content><article><h1><a href="">프로세스에 대해 알아보자</a></h1><nav style="display:flex; height: 100%"><p>2022/01/15 21:13:50 Sat</p><a class="tag" href="../../../tags/linux">linux</a></nav><br><p></p><hr>
<h2>fork()</h2>
<pre><code class="language-c hljs"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-type">pid_t</span> <span class="hljs-title function_">fork</span><span class="hljs-params">()</span>
"현재 프로세스에서 자식 프로세스를 복제"
</code></pre>
<p>현재 실행중인 프로세스의</p>
<p>반환값은</p>
<ul>
<li>부모 프로세스: 자식 프로세스의 pid</li>
<li>자식 프로세스: 0</li>
</ul>
<p>그러니</p>
<h2>waitpid()</h2>
<ol>
<li>fork()</li>
</ol>
<pre><code class="language-c hljs"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
  <span class="hljs-type">pid_t</span> pid;

  pid = fork();
  <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"[자식 프로세스] 내 pid:%d\n"</span>, getpid());
    sleep(<span class="hljs-number">3</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"[자식 프로세스] ok i'm die thank you forever\n"</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pid &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"[부모 프로세스] 자식 프로세스 pid는:%d\n"</span>, pid);
    waitpid(pid, <span class="hljs-literal">NULL</span>, <span class="hljs-number">0</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"[부모 프로세스] 자식 프로세스 %d가 끝남\n"</span>, pid);
  }
  <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>);
}
</code></pre>
<p><a href="https://codetravel.tistory.com/23">fork()</a></p>
<p></p></article><hr><script src="https://utteranc.es/client.js" repo="scarf005/comments" issue-term="pathname" label="comment" theme="github-dark" crossorigin="anonymous" async=""></script></content></section><footer></footer><link rel="stylesheet" href="../../../fonts.css" type="text/css"></body></html>